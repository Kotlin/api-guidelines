<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  <meta charset="UTF-8">   <meta name="built-on" content="${builtOn}">   <title>Readabilityâ€”API guidelines</title><script id="virtual-toc-data" type="application/json">[{"id":"api-consistency","level":0,"title":"API consistency","anchor":"#api-consistency"},{"id":"use-builder-dsl","level":0,"title":"Use builder DSL","anchor":"#use-builder-dsl"},{"id":"use-constructor-like-functions-where-applicable","level":0,"title":"Use constructor-like functions where applicable","anchor":"#use-constructor-like-functions-where-applicable"},{"id":"use-member-and-extension-functions-appropriately","level":0,"title":"Use member and extension functions appropriately","anchor":"#use-member-and-extension-functions-appropriately"},{"id":"avoid-using-boolean-arguments-in-functions","level":0,"title":"Avoid using Boolean arguments in functions","anchor":"#avoid-using-boolean-arguments-in-functions"},{"id":"what-s-next","level":0,"title":"What\u0027s next?","anchor":"#what-s-next"}]</script>     <link href="api-guidelines/app/app.css%3F_ijt=4o6hbqa37mp6mvmer7umfmoiot.css" rel="stylesheet">   <link rel="shortcut icon" href="https://resources.jetbrains.com/storage/ui/favicons/favicon.ico" type="image/x-icon" sizes="16x16 32x32"/><link rel="apple-touch-icon" sizes="57x57" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-180x180.png"/><link rel="mask-icon" href="https://resources.jetbrains.com/storage/ui/favicons/apple-mask-icon.svg" color="black"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="${ogMetaImage}"><!-- Open Graph --><meta property="og:title" content="Readability - Help | API guidelines"/><meta property="og:description" content=""/><meta property="og:image" content="${ogMetaImage}"/><meta property="og:site_name" content="API guidelines Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="${ogUrl}"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="${ogTwitter}"><meta name="twitter:title" content="Readability - Help | API guidelines"><meta name="twitter:description" content=""><meta name="twitter:creator" content="${ogTwitter}"><meta name="twitter:image:src" content="${ogMetaImage}"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "${ogUrl}#webpage", "url": "${ogUrl}", "name": "Readability - Help | API guidelines", "description": "", "image": "${ogMetaImage}", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "${ogUrlRoot}#website", "url": "${ogUrlRoot}", "name": "API guidelines Help" }</script><!-- End Schema.org --></head>    <body data-id="jvm-api-guidelines-readability" data-main-title="Readability" data-article-props="{&quot;microFormat&quot;:[],&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs=""  data-edit-url="https://github.com/Kotlin/api-guidelines/edit/main/docs/topics/jvm-api-guidelines-readability.md"  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>API guidelines  Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="jvm-api-guidelines-readability" id="jvm-api-guidelines-readability.md"  >Readability</h1><p id="d837" >This chapter contains considerations about <a href="jvm-api-guidelines-readability.html#api-consistency" id="d83b"  >API consistency</a> and the following recommendations:</p> <ul class="list _ul" id="d841"   ><li class="list__item" id="d845" ><a href="jvm-api-guidelines-readability.html#use-builder-dsl" id="d849"  >Use builder DSL</a></li> <li class="list__item" id="d84f" ><a href="jvm-api-guidelines-readability.html#use-constructor-like-functions-where-applicable" id="d853"  >Use constructor-like functions where applicable</a></li> <li class="list__item" id="d859" ><a href="jvm-api-guidelines-readability.html#use-member-and-extension-functions-appropriately" id="d85d"  >Use member and extension functions appropriately</a></li> <li class="list__item" id="d863" ><a href="jvm-api-guidelines-readability.html#avoid-using-boolean-arguments-in-functions" id="d867"  >Avoid using Boolean arguments in functions</a></li></ul> <section class="chapter" >  <h2 id="api-consistency" data-toc="jvm-api-guidelines-readability#api-consistency" >API consistency</h2><p id="d872" >A consistent and well-documented API is crucial for a good development experience. The same is valid for argument order, overall naming scheme, and overloads. Also, it's worth documenting all conventions.</p> <p id="d876" >For example, if one of your methods accepts <code class="code " id="d87a"  >offset</code> and <code class="code " id="d87e"  >length</code> as parameters, then so should other methods instead of accepting <code class="code " id="d882"  >startIndex</code> and <code class="code " id="d886"  >endIndex</code>. Parameters like these are most likely of  <code class="code " id="d88a"  >Int</code> or <code class="code " id="d88e"  >Long</code> type, and thus it's very easy to confuse them.</p> <p id="d892" >The same works for parameter order: Keep it consistent between methods and overloads. Otherwise, users of your library might guess incorrectly the order they should pass arguments.</p> <p id="d896" >Here is an example of both preserving the parameter order and consistent naming:</p> <div class="code-block" data-lang="kotlin" id="d89e"       >  fun String.chop(length: Int): String = substring(0, length)
fun String.chop(length: Int, startIndex: Int) =
    substring(startIndex, length + startIndex)
  </div> <p id="d8a3" >If you have many lookalike methods, name them consistently and predictably. This is how the <code class="code " id="d8a7"  >stdlib</code> API works: there are methods <code class="code " id="d8ab"  >first()</code> and <code class="code " id="d8af"  >firstOrNull()</code>, <code class="code " id="d8b3"  >single()</code> and <code class="code " id="d8b7"  >singleOrNull()</code>, and so on. It's clear from their names that they are all pairs, and some of them might return <code class="code " id="d8bb"  >null</code> while others might throw an exception.</p>  </section><section class="chapter" >  <h2 id="use-builder-dsl" data-toc="jvm-api-guidelines-readability#use-builder-dsl" >Use builder DSL</h2><p id="d8c4" ><a href="https://en.wikipedia.org/wiki/Builder_pattern" data-external="true" id="d8c8" rel="noopener noreferrer" >&quot;Builder&quot;</a> is a well-known pattern in development. It allows you to build a complex entity, not in a single expression, but gradually while getting more information. When you need to use a builder, it's better to write it using builder DSL &mdash; this is binary-compatible and more idiomatic.</p> <p id="d8ce" >A canonical example of a Kotlin builder DSL is <code class="code " id="d8d2"  >kotlinx.html</code>. Consider this example:</p> <div class="code-block" data-lang="kotlin" id="d8da"       >  header(&quot;modal-card-head&quot;) {
    p(&quot;modal-card-title&quot;) {
        +book.book.name
    }
    button(classes = &quot;delete&quot;) {
        attributes[&quot;aria-label&quot;] = &quot;close&quot;
        attributes[&quot;_&quot;] = closeModalScript
    }
}
  </div> <p id="d8df" >It could be implemented as a traditional builder. But this is considerably more verbose:</p> <div class="code-block" data-lang="kotlin" id="d8e7"       >  headerBuilder()
    .addClasses(&quot;modal-card-head&quot;)
    .addElement(
        pBuilder()
            .addClasses(&quot;modal-card-title&quot;)
            .addContent(book.book.name)
            .build()
    )
    .addElement(
        buttonBuilder()
            .addClasses(&quot;delete&quot;)
            .addAttribute(&quot;aria-label&quot;, &quot;close&quot;)
            .addAttribute(&quot;_&quot;, closeModalScript)
            .build()
    )
    .build()
  </div> <p id="d8ec" >It has too many details that you don't necessarily need to know and requires you to build each entity at the end.</p> <p id="d8f0" >The situation worsens further if you need to generate something dynamically in a loop. In this scenario, you have to instantiate a variable and dynamically overwrite it:</p> <div class="code-block" data-lang="kotlin" id="d8f8"       >  var buttonBuilder = buttonBuilder()
    .addClasses(&quot;delete&quot;)
for ((attributeName, attributeValue) in attributes) {
    buttonBuilder = buttonBuilder.addAttribute(attributeName, attributeValue)
}
buttonBuilder.build()
  </div> <p id="d8fd" >Inside the builder DSL, you can directly call a loop and all necessary DSL calls:</p> <div class="code-block" data-lang="kotlin" id="d905"       >  div(&quot;tags&quot;) {
    for (genre in book.genres) {
        span(&quot;tag is-rounded is-normal is-info is-light&quot;) {
            +genre
        }
    }
}
  </div> <p id="d90a" >Keep in mind that inside curly braces it's impossible to check at compile time if you have set all the required attributes. To avoid this, put required arguments as function arguments, not as builder's properties. For example, if you want <code class="code " id="d90e"  >href</code> to be a mandatory HTML attribute, your function will look like:</p> <div class="code-block" data-lang="kotlin" id="d916"       >  fun a(href: String, block: A.() -&gt; Unit): A
  </div> <p id="d91b" >And not just:</p> <div class="code-block" data-lang="kotlin" id="d923"       >  fun a(block: A.() -&gt; Unit): A
  </div> <aside data-type="note" class="prompt" data-title="" id="d928" ><p id="d92d" >Builder DSLs are <a href="jvm-api-guidelines-backward-compatibility.html" id="d931"  >backward compatible</a> as long as you don't delete anything from them. Typically this isn't a problem because most developers just add more properties to their builder classes over time.</p></aside>  </section><section class="chapter" >  <h2 id="use-constructor-like-functions-where-applicable" data-toc="jvm-api-guidelines-readability#use-constructor-like-functions-where-applicable" >Use constructor-like functions where applicable</h2><p id="d93c" >Sometimes, it makes sense to simplify your API's appearance by using constructor-like functions. A constructor-like function is a function whose name starts with a capital letter so it looks like a constructor. This approach can make your library easier to understand.</p> <p id="d940" >For example, you want to introduce some <a href="https://en.wikipedia.org/wiki/Option_type" data-external="true" id="d944" rel="noopener noreferrer" >Option type</a> in your library:</p> <div class="code-block" data-lang="kotlin" id="d94e"       >  sealed interface Option&lt;T&gt;
class Some&lt;T : Any&gt;(val t: T) : Option&lt;T&gt;
object None : Option&lt;Nothing&gt;
  </div> <p id="d953" >You can define implementations of all the <code class="code " id="d957"  >Option</code> interface methods &mdash; <code class="code " id="d95b"  >map()</code>, <code class="code " id="d95f"  >flatMap()</code>, and so on. But each time your API users create such an <code class="code " id="d963"  >Option</code>, they must write some logic and check what they create. For example:</p> <div class="code-block" data-lang="kotlin" id="d96b"       >  fun findById(id: Int): Option&lt;Person&gt; {
    val person = db.personById(id)
    return if (person == null) None else Some(person)
}
  </div> <p id="d970" >Instead of having to write the same check each time, you can add just one line to your API:</p> <div class="code-block" data-lang="kotlin" id="d978"       >  fun &lt;T&gt; Option(t: T?): Option&lt;out T &amp; Any&gt; =
    if (t == null) None else Some(t)

// Usage of the code above:
fun findById(id: Int): Option&lt;Person&gt; = Option(db.personById(id))
  </div> <p id="d97d" >Now, creating a valid <code class="code " id="d981"  >Option</code> is a no-brainer: just call <code class="code " id="d985"  >Option(x)</code> and you have a null-safe, purely functional Option idiom.</p> <p id="d989" >Another use case for using a constructor-like function is when you need to return some &quot;hidden&quot; things: a private instance, or some internal object. For example, let's look at a method from the standard library:</p> <div class="code-block" data-lang="kotlin" id="d991"       >  public fun &lt;T&gt; listOf(vararg elements: T): List&lt;T&gt; =
    if (elements.isNotEmpty()) elements.asList() else emptyList()
  </div> <p id="d996" >In the code above, <code class="code " id="d99a"  >emptyList()</code> returns the following:</p> <div class="code-block" data-lang="kotlin" id="d9a2"       >  internal object EmptyList : List&lt;Nothing&gt;, Serializable, RandomAccess
  </div> <p id="d9a7" >You can write a constructor-like function to lower the <a href="jvm-api-guidelines-introduction.html#cognitive-complexity" id="d9ab"  >cognitive complexity</a> of your code and reduce the size of your API:</p> <div class="code-block" data-lang="kotlin" id="d9b5"       >  fun &lt;T&gt; List(): List&lt;T&gt; = EmptyList

// Usage of the code above:
public fun &lt;T&gt; listOf(vararg elements: T): List&lt;T&gt; =
    if (elements.isNotEmpty()) elements.asList() else List()
  </div>  </section><section class="chapter" >  <h2 id="use-member-and-extension-functions-appropriately" data-toc="jvm-api-guidelines-readability#use-member-and-extension-functions-appropriately" >Use member and extension functions appropriately</h2><p id="d9bf" >Write only the very core of the API as <a href="https://kotlinlang.org/docs/functions.html#member-functions" data-external="true" id="d9c3" rel="noopener noreferrer" >member functions</a> and everything else as <a href="https://kotlinlang.org/docs/extensions.html#extension-functions" data-external="true" id="d9c9" rel="noopener noreferrer" >extension functions</a>. It allows you to clearly show to the reader what's the core functionality and what's not.</p> <p id="d9cf" >For example, consider a class for a graph:</p> <div class="code-block" data-lang="kotlin" id="d9d7"       >  class Graph {
    private val _vertices: MutableSet&lt;Int&gt; = mutableSetOf()
    private val _edges: MutableMap&lt;Int, MutableSet&lt;Int&gt;&gt; = mutableMapOf()

    fun addVertex(vertex: Int) {
        _vertices.add(vertex)
    }

    fun addEdge(vertex1: Int, vertex2: Int) {
        _vertices.add(vertex1)
        _vertices.add(vertex2)
        _edges.getOrPut(vertex1) { mutableSetOf() }.add(vertex2)
        _edges.getOrPut(vertex2) { mutableSetOf() }.add(vertex1)
    }

    val vertices: Set&lt;Int&gt; get() = _vertices
    val edges: Map&lt;Int, Set&lt;Int&gt;&gt; get() = _edges
}
  </div> <p id="d9dc" >There is a bare minimum of vertices and edges as private variables, functions to add vertices and edges, and accessor functions that return an immutable representation of the current state.</p> <p id="d9e0" >You can add all the remaining functionality outside the class:</p> <div class="code-block" data-lang="kotlin" id="d9e8"       >  fun Graph.getNumberOfVertices(): Int = vertices.size
fun Graph.getNumberOfEdges(): Int = edges.size
fun Graph.getDegree(vertex: Int): Int = edges[vertex]?.size ?: 0
  </div> <p id="d9ed" >So, only properties, overrides, and accessors should be members.</p>  </section><section class="chapter" >  <h2 id="avoid-using-boolean-arguments-in-functions" data-toc="jvm-api-guidelines-readability#avoid-using-boolean-arguments-in-functions" >Avoid using Boolean arguments in functions</h2><p id="d9f6" >It's almost impossible to understand what the purpose of a <code class="code " id="d9fa"  >Boolean</code> argument is just by reading code anywhere except in IDEs, for example, on some version control system sites. Using <a href="https://kotlinlang.org/docs/functions.html#named-arguments" data-external="true" id="d9fe" rel="noopener noreferrer" >named arguments</a> can help to clarify this, but for now in IDEs, there is no way to force developers to use them. Another option is to create a function that contains the action of the <code class="code " id="da04"  >Boolean</code> argument and give this function a descriptive name.</p> <p id="da08" >For example, in the standard library there are two functions for <code class="code " id="da0c"  >map()</code>:</p> <div class="code-block" data-lang="kotlin" id="da14"       >  map(transform: (T) -&gt; R)

mapNotNull(transform: (T) -&gt; R?)
  </div> <p id="da19" >It was possible to add something like <code class="code " id="da1d"  >map(filterNulls: Boolean)</code> and write code like this:</p> <div class="code-block" data-lang="kotlin" id="da25"       >  listOf(1, null, 2).map(false) { it.toString() }
  </div> <p id="da2a" >From reading this code, it's tough to infer what <code class="code " id="da2e"  >false</code> actually means. However, if you use the <code class="code " id="da32"  >mapNotNull()</code> function, you can understand the logic at first glance:</p> <div class="code-block" data-lang="kotlin" id="da3a"       >  listOf(1, null, 2).mapNotNull { it.toString() } 
  </div>  </section><section class="chapter" >  <h2 id="what-s-next" data-toc="jvm-api-guidelines-readability#what-s-next" >What's next?</h2><p id="da44" >Learn about API's:</p> <ul class="list _ul" id="da48"   ><li class="list__item" id="da4c" ><a href="jvm-api-guidelines-predictability.html" id="da50"  >Predictability</a></li> <li class="list__item" id="da56" ><a href="jvm-api-guidelines-debuggability.html" id="da5a"  >Debuggability</a></li> <li class="list__item" id="da60" ><a href="jvm-api-guidelines-backward-compatibility.html" id="da64"  >Backward compatibility</a></li></ul>  </section><div class="last-modified"> Last modified: 10 April 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">   </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="api-guidelines/app/app.js%3F_ijt=4o6hbqa37mp6mvmer7umfmoiot"></script></body></html>